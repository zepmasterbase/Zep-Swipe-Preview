<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zep Swipe â€” Request</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600;700&family=Exo+2:wght@600;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg: #08051a;
    --glass: rgba(255,255,255,0.04);
    --accent-a: #00f0ff;
    --accent-b: #ff00f0;
    --gradient: linear-gradient(90deg,var(--accent-a),var(--accent-b));
  }
  body {
    background: radial-gradient(circle at 20% 20%, #14102e 0%, var(--bg) 70%);
    font-family: 'Poppins', sans-serif;
    color: #e9eeff;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 1rem;
  }
  .glass {
    background: linear-gradient(160deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.05);
    box-shadow: 0 8px 40px rgba(0,0,0,0.5);
    backdrop-filter: blur(20px);
  }
  .status-bar {
    height: 8px;
    background: rgba(255,255,255,0.05);
    border-radius: 999px;
    overflow: hidden;
  }
  .status-bar-inner {
    height: 100%;
    width: 30%;
    background: var(--gradient);
    transition: width 0.6s ease;
  }
  .contact {
    width: 60px; height: 60px;
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;
    position: relative;
    transition: transform .2s, box-shadow .2s;
  }
  .contact img {
    width: 100%; height: 100%; object-fit: cover;
  }
  .contact[data-active="true"] {
    box-shadow: 0 0 12px rgba(0,240,255,0.4);
    transform: translateY(-4px);
  }
  .input-card input, .input-card textarea {
    background: var(--glass);
    border: none;
    border-radius: 12px;
    width: 100%;
    color: #e9eeff;
    padding: 0.8rem 1rem;
    font-size: 1rem;
    outline: none;
  }
  .input-card input::placeholder, .input-card textarea::placeholder {
    color: #9da5c7;
  }
  .request-btn {
    background: var(--gradient);
    border: none;
    border-radius: 14px;
    padding: 0.9rem;
    width: 100%;
    color: #081223;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: transform .2s, box-shadow .3s;
  }
  .request-btn:hover {
    box-shadow: 0 0 20px rgba(0,240,255,0.2);
    transform: translateY(-2px);
  }
  .recent-card {
    animation: slideUp .4s ease both;
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<main class="w-full max-w-md glass p-6 space-y-5">
  <!-- Status Bar -->
  <div class="status-bar"><div class="status-bar-inner" id="statusBar"></div></div>
  <div class="flex justify-between text-sm text-gray-400">
    <span>Pending</span><span id="pendingCount">3 Requests</span>
  </div>

  <!-- Amount input -->
  <div class="input-card space-y-3">
    <input id="amount" type="number" placeholder="Enter amount (e.g. 250 ZAC)" />
    <textarea id="note" rows="2" placeholder="Add a note (optional)"></textarea>
  </div>

  <!-- Contacts -->
  <div>
    <h3 class="text-sm text-gray-300 mb-2 font-medium">Select Contact</h3>
    <div id="contacts" class="flex gap-3 overflow-x-auto pb-2">
      <div class="contact" data-user="Alice" data-active="false"><img src="https://i.pravatar.cc/60?img=1" alt="Alice"></div>
      <div class="contact" data-user="Bob" data-active="false"><img src="https://i.pravatar.cc/60?img=2" alt="Bob"></div>
      <div class="contact" data-user="Charlie" data-active="false"><img src="https://i.pravatar.cc/60?img=3" alt="Charlie"></div>
      <div class="contact" data-user="Diana" data-active="false"><img src="https://i.pravatar.cc/60?img=4" alt="Diana"></div>
    </div>
  </div>

  <!-- Request Button -->
  <button id="requestBtn" class="request-btn">Request</button>

  <!-- Recent Requests -->
  <div class="mt-4">
    <h3 class="text-sm text-gray-300 mb-2 font-medium">Recent Requests</h3>
    <div id="recentList" class="space-y-3"></div>
  </div>
</main>

<script>
const contacts = document.querySelectorAll('.contact');
let selectedUser = null;

contacts.forEach(c => {
  c.addEventListener('click', () => {
    contacts.forEach(o => o.dataset.active = 'false');
    c.dataset.active = 'true';
    selectedUser = c.dataset.user;
  });
});

const requestBtn = document.getElementById('requestBtn');
const amountInput = document.getElementById('amount');
const noteInput = document.getElementById('note');
const recentList = document.getElementById('recentList');
const statusBar = document.getElementById('statusBar');
const pendingCount = document.getElementById('pendingCount');

let pending = 3;
function updatePendingDisplay() {
  statusBar.style.width = Math.min(100, pending * 20) + '%';
  pendingCount.textContent = `${pending} Pending`;
}
updatePendingDisplay();

function addRecent(user, amount, note, status) {
  const card = document.createElement('div');
  card.className = 'recent-card glass p-3 rounded-lg';
  card.innerHTML = `
    <div class="flex justify-between items-center">
      <div>
        <div class="font-semibold">${user}</div>
        <div class="text-sm text-gray-400">${note || 'No note added'}</div>
      </div>
      <div class="text-right">
        <div class="font-bold text-lg">${amount} ZAC</div>
        <span class="text-xs px-2 py-1 rounded-md ${status==='Accepted'?'bg-green-600/40':'bg-yellow-600/30'}">${status}</span>
      </div>
    </div>
  `;
  recentList.prepend(card);
}

// Simulate backend call
function simulateRequest(payload) {
  return new Promise(res => setTimeout(() => res({ok:true,status:'Pending'}), 1200));
}

requestBtn.addEventListener('click', async () => {
  const amount = Number(amountInput.value);
  const note = noteInput.value.trim();
  if(!selectedUser) return alert('Select a contact to request from.');
  if(!amount || amount <= 0) return alert('Enter a valid amount.');

  requestBtn.disabled = true;
  requestBtn.textContent = 'Sending...';
  requestBtn.style.opacity = 0.8;

  const payload = { user: selectedUser, amount, note };

  try {
    const res = await simulateRequest(payload);
    if(res.ok) {
      addRecent(selectedUser, amount, note, res.status);
      pending++;
      updatePendingDisplay();
      amountInput.value = '';
      noteInput.value = '';
      contacts.forEach(c => c.dataset.active='false');
      selectedUser=null;
    }
  } finally {
    requestBtn.disabled = false;
    requestBtn.textContent = 'Request';
    requestBtn.style.opacity = 1;
  }
});
</script>

</body>
</html>