<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Zep Swipe ‚Äî Student Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.min.js"></script>

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --glass:rgba(255,255,255,0.06);
  --bg:radial-gradient(circle at 25% 10%, #020014 0%, #00000a 100%);
}

/* Base */
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:#fff;
}

/* Container */
.container{
  max-width:900px;
  margin:30px auto;
  padding:16px;
}

/* HEADER */
.header{
  padding:18px;
  border-radius:16px;
  background:var(--glass);
  border:1px solid rgba(255,255,255,0.1);
  backdrop-filter:blur(15px);
  display:flex;
  justify-content:space-between;
  align-items:center;
  animation:glowHeader 3.5s infinite alternate ease-in-out;
}
@keyframes glowHeader{
  0%{box-shadow:0 0 18px rgba(0,240,255,0.20);}
  100%{box-shadow:0 0 42px rgba(156,77,255,0.45);}
}

.brand{
  font-family:'Orbitron';
  font-size:1.7rem;
  font-weight:700;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 22px rgba(0,240,255,0.7);
}

/* Wallet Address */
.addr{
  font-family:'Orbitron';
  font-size:0.95rem;
  color:#d7faff;
  text-align:right;
}

/* Logout */
.logout{
  margin-left:8px;
  background:transparent;
  border:0;
  cursor:pointer;
  filter:drop-shadow(0 0 9px rgba(255,80,80,0.8));
}

/* Portfolio section */
.portfolio-box{
  margin-top:24px;
  padding:20px;
  border-radius:18px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.12);
  backdrop-filter:blur(16px);
  animation:pulsePortfolio 4s infinite alternate ease-in-out;
}
@keyframes pulsePortfolio {
  0%{box-shadow:0 0 22px rgba(0,240,255,0.20);}
  100%{box-shadow:0 0 40px rgba(156,77,255,0.30);}
}

.section-title{
  font-family:'Orbitron';
  font-size:1.25rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:16px;
}

/* Coin Box */
.coin{
  width:70px;height:70px;
  border-radius:20px;
  background:linear-gradient(140deg,var(--zep-blue),var(--zep-violet));
  display:flex;align-items:center;justify-content:center;
  font-family:Orbitron;font-size:20px;color:#050015;
  box-shadow:0 12px 40px rgba(0,240,255,0.15);
}

.balance-text{
  margin-left:16px;
}
.balance-text .big{
  font-family:'Orbitron';
  font-size:26px;
}
.balance-text .small{
  opacity:0.85;
  font-size:13px;
}

/* Grid for Wallet + Earn mini actions */
.mini-grid{
  margin-top:20px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
}

.mini-card{
  padding:16px;
  text-align:center;
  background:rgba(255,255,255,0.05);
  border-radius:16px;
  backdrop-filter:blur(14px);
  border:1px solid rgba(255,255,255,0.12);
  animation:pulseMini 3s infinite alternate ease-in-out;
}
@keyframes pulseMini{
  0%{box-shadow:0 0 14px rgba(0,240,255,0.15);}
  100%{box-shadow:0 0 30px rgba(156,77,255,0.25);}
}

.mini-card h3{
  margin:6px 0 0 0;
  font-family:'Orbitron';
  font-size:1rem;
}

/* Disabled placeholders */
.disabled-card{
  margin-top:12px;
  padding:18px;
  background:rgba(255,255,255,0.02);
  border-radius:15px;
  border:1px dashed rgba(255,255,255,0.08);
  opacity:0.35;
  text-align:center;
  font-family:'Orbitron';
}

/* Floating AI */
.ai-bubble{
  position:fixed;
  right:18px;
  bottom:110px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  padding:12px 20px;
  border-radius:100px;
  color:#050015;
  font-family:'Orbitron';
  font-weight:700;
  cursor:pointer;
  box-shadow:0 12px 40px rgba(156,77,255,0.35);
}

/* Footer Nav */
.footer{
  position:fixed;
  bottom:0;left:0;right:0;
  padding:14px 22px;
  background:rgba(0,0,0,0.55);
  display:flex;
  justify-content:space-around;
  backdrop-filter:blur(10px);
}

.fbtn{
  width:58px;height:58px;
  border-radius:18px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  display:flex;align-items:center;justify-content:center;
  transition:0.25s;
  cursor:pointer;
  filter:drop-shadow(0 0 14px rgba(0,240,255,0.15));
}
.fbtn:hover{
  transform:translateY(-7px);
  filter:drop-shadow(0 0 35px rgba(156,77,255,0.45));
}
</style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">Zep Swipe</div>

    <div style="text-align:right;">
      <div id="walletShort" class="addr">‚Äî</div>

      <button class="logout" id="logoutBtn">
        <svg width="22" height="22" fill="none" stroke="#ff6b6b" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
      </button>
    </div>
  </div>


  <!-- PORTFOLIO -->
  <div class="portfolio-box">

    <div class="section-title">Portfolio</div>

    <!-- ZAC row -->
    <div style="display:flex;align-items:center;">
      <div class="coin">ZAC</div>
      <div class="balance-text">
        <div class="big" id="zacAmount">25 ZAC (test)</div>
        <div class="small" id="zacUsd">‚âà $3.75 USD</div>
      </div>
    </div>

    <hr style="opacity:0.10;margin:16px 0;">

    <!-- USDT row -->
    <div style="display:flex;justify-content:space-between;font-family:Orbitron;">
      <div>USDT Balance</div>
      <div id="usdtBal">$0.00</div>
    </div>
  </div>


  <!-- MINI GRID -->
  <div class="mini-grid">
    <a href="wallet.html" class="mini-card" style="text-decoration:none;color:#fff;">
      <h3>Wallet</h3>
    </a>

    <a href="learn-earn.html" class="mini-card" style="text-decoration:none;color:#fff;">
      <h3>Earn</h3>
    </a>
  </div>

  <!-- DISABLED FUTURE FEATURES -->
  <div class="disabled-card">üõç Marketplace ‚Äî Coming Soon</div>
  <div class="disabled-card">üì¶ Parcel On ‚Äî Coming Soon</div>
  <div class="disabled-card">üöó Swipe Rides ‚Äî Coming Soon</div>

</div>


<!-- ZEP AI FLOAT -->
<button class="ai-bubble" onclick="window.location.href='zep-ai.html'">
  ü§ñ Ask Zep AI
</button>


<!-- FOOTER -->
<div class="footer">

  <a class="fbtn" href="wallet.html">
    <svg width="26" height="26" fill="none" viewBox="0 0 24 24" stroke="url(#g1)" stroke-width="1.4">
      <rect x="3" y="7" width="18" height="13" rx="2"/>
      <path d="M3 11h18"/>
      <defs><linearGradient id="g1"><stop stop-color="#00f0ff"/><stop offset="1" stop-color="#9c4dff"/></linearGradient></defs>
    </svg>
  </a>

  <a class="fbtn" href="learn-earn.html">
    <svg width="26" height="26" fill="none" viewBox="0 0 24 24" stroke="url(#g2)" stroke-width="1.4">
      <circle cx="12" cy="12" r="8"/>
      <path d="M12 8v8M8 12h8"/>
      <defs><linearGradient id="g2"><stop stop-color="#00f0ff"/><stop offset="1" stop-color="#9c4dff"/></linearGradient></defs>
    </svg>
  </a>

  <a class="fbtn" href="zep-ai.html">
    <svg width="26" height="26" fill="none" viewBox="0 0 24 24" stroke="url(#g3)" stroke-width="1.4">
      <circle cx="12" cy="12" r="9"/>
      <circle cx="9" cy="10" r="1"/>
      <circle cx="15" cy="10" r="1"/>
      <path d="M8 15c2 2 6 2 8 0"/>
      <defs><linearGradient id="g3"><stop stop-color="#00f0ff"/><stop offset="1" stop-color="#9c4dff"/></linearGradient></defs>
    </svg>
  </a>

  <a class="fbtn" href="profile.html">
    <svg width="26" height="26" fill="none" viewBox="0 0 24 24" stroke="url(#g4)" stroke-width="1.4">
      <circle cx="12" cy="8" r="3"/>
      <path d="M4 20c1.5-4 7-6 8-6s6.5 2 8 6"/>
      <defs><linearGradient id="g4"><stop stop-color="#00f0ff"/><stop offset="1" stop-color="#9c4dff"/></linearGradient></defs>
    </svg>
  </a>

</div>


<script>
/* SHORT ADDRESS */
function shortAddr(a){return a?`${a.slice(0,6)}...${a.slice(-4)}`:'‚Äî';}

/* LOGOUT */
document.getElementById("logoutBtn").onclick = ()=>{
  localStorage.removeItem("zepStudent");
  location.href="student-login.html";
};

/* Base USDT contract */
const USDT = "0xdAC17F958D2ee523a2206206994597C13D831ec7";
const ERC20_ABI = [
  "function balanceOf(address owner) view returns (uint256)",
  "function decimals() view returns (uint8)"
];

/* ON LOAD */
window.onload = async ()=>{

  const s = JSON.parse(localStorage.getItem("zepStudent"));
  if(!s){ location.href="student-login.html"; return; }

  document.getElementById("walletShort").textContent = shortAddr(s.wallet);

  fetchUSDT(s.wallet);
};

/* Fetch USDT Balance using Base RPC */
async function fetchUSDT(wallet){
  try{
    const provider = new ethers.JsonRpcProvider("https://mainnet.base.org");
    const c = new ethers.Contract(USDT, ERC20_ABI, provider);
    const dec = await c.decimals();
    const bal = await c.balanceOf(wallet);
    const f = Number(ethers.formatUnits(bal, dec));
    document.getElementById("usdtBal").textContent = "$" + f.toFixed(2);
  }catch(e){
    document.getElementById("usdtBal").textContent = "$0.00";
  }
}
</script>

</body>
</html>