<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZepVibes</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
body{background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);color:#fff;}
.container{max-width:600px;margin:auto;padding:1rem;}
nav{display:flex;justify-content:space-between;align-items:center;padding:1rem;backdrop-filter:blur(10px);background: rgba(255,255,255,0.05);border-radius:15px;margin-bottom:1rem;}
nav h1{font-family:'Orbitron',sans-serif;font-size:1.8rem;color:#39ff14;text-shadow:0 0 15px #39ff14;letter-spacing:2px;}
nav a button{background:#8a2be2;padding:0.5rem 1rem;border:none;border-radius:10px;color:#fff;cursor:pointer;transition:0.3s;}
nav a button:hover{background:#b55fff;}

.tweet-form{display:flex;flex-direction:column;margin-bottom:1rem;}
.tweet-form textarea{padding:1rem;border-radius:15px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:#fff;resize:none;min-height:80px;backdrop-filter:blur(5px);}
.tweet-form button{margin-top:0.5rem;background:#8a2be2;padding:0.5rem 1rem;border-radius:10px;border:none;cursor:pointer;transition:0.3s;}
.tweet-form button:hover{background:#b55fff;}

.tweet-card{background:rgba(255,255,255,0.05);backdrop-filter:blur(5px);border-radius:15px;padding:1rem;margin-bottom:1rem;box-shadow:0 0 15px rgba(0,0,0,0.3);display:flex;gap:0.75rem;transition:0.3s;}
.tweet-card:hover{box-shadow:0 0 25px #8a2be2;}
.tweet-card img.avatar{width:50px;height:50px;border-radius:50%;object-fit:cover;}
.tweet-content{flex:1;}
.tweet-content h2{font-family:'Orbitron',sans-serif;color:#39ff14;font-size:1.2rem;margin-bottom:0.3rem;cursor:pointer;}
.tweet-content p{font-size:1rem;line-height:1.4;}
.tweet-content span{font-size:0.8rem;color:#aaa;margin-top:0.5rem;display:block;}
.reply-form{margin-top:0.5rem;display:flex;flex-direction:column;gap:0.3rem;}
.reply-form input{padding:0.5rem;border-radius:10px;border:none;background:rgba(255,255,255,0.05);color:#fff;backdrop-filter:blur(5px);}
.reply-form button{padding:0.3rem 0.5rem;border-radius:10px;border:none;background:#39ff14;color:#000;cursor:pointer;}

footer{position:fixed;bottom:0;width:100%;max-width:600px;left:50%;transform:translateX(-50%);display:flex;justify-content:space-around;padding:0.5rem 0;backdrop-filter:blur(10px);background: rgba(255,255,255,0.05);border-top-left-radius:15px;border-top-right-radius:15px;}
footer svg{width:30px;height:30px;fill:#fff;filter:drop-shadow(0 0 6px #39ff14);transition:0.3s;cursor:pointer;}
footer svg:hover{filter:drop-shadow(0 0 10px #39ff14);}

@media(max-width:600px){nav h1{font-size:1.5rem;}.tweet-card h2{font-size:1rem;}.tweet-card p{font-size:0.9rem;}}
</style>
</head>
<body>

<div class="container">
<nav>
  <h1>ZepVibes</h1>
  <a href="profile.html"><button>Profile</button></a>
</nav>

<form class="tweet-form" id="tweetForm">
  <textarea id="tweetInput" placeholder="Share your vibes..."></textarea>
  <button type="submit">Post</button>
</form>

<div id="tweetsFeed"></div>
</div>

<footer>
  <svg viewBox="0 0 24 24"><path d="M12 3l9 9h-3v9h-12v-9h-3z"/></svg>
  <svg viewBox="0 0 24 24"><path d="M12 2l10 5-10 5-10-5z"/><path d="M2 12v6h20v-6"/></svg>
  <svg viewBox="0 0 24 24"><path d="M3 17h6l4-8 4 6 4-4"/></svg>
</footer>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Current user (replace with Auth user ID later)
const currentUser = { id:"student123", name:"You", avatar:"https://i.pravatar.cc/50" };

// Load tweets in real-time
function loadTweets() {
  db.collection("tweets").orderBy("createdAt","desc").onSnapshot(snapshot=>{
    const tweetsFeed = document.getElementById("tweetsFeed");
    tweetsFeed.innerHTML="";
    snapshot.forEach(doc=>{
      const tweet = doc.data();
      const card = document.createElement('div');
      card.classList.add('tweet-card');
      card.innerHTML=`
        <img class="avatar" src="${tweet.user.avatar}" alt="Avatar">
        <div class="tweet-content">
          <h2 onclick="window.location.href='profile.html'">${tweet.user.name}</h2>
          <p>${tweet.content}</p>
          <span>${tweet.createdAt?.toDate ? tweet.createdAt.toDate().toLocaleString() : ''}</span>
          <form class="reply-form">
            <input type="text" placeholder="Reply...">
            <button type="submit">Reply</button>
          </form>
          <div class="replies"></div>
        </div>
      `;
      tweetsFeed.appendChild(card);

      // Reply handler
      const replyForm = card.querySelector('.reply-form');
      replyForm.addEventListener('submit', e=>{
        e.preventDefault();
        const input = replyForm.querySelector('input');
        const replyContent = input.value.trim();
        if(!replyContent) return;
        db.collection("tweets").doc(doc.id).collection("replies").add({
          user: currentUser,
          content: replyContent,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        input.value="";
      });

      // Load replies
      db.collection("tweets").doc(doc.id).collection("replies")
        .orderBy("createdAt")
        .onSnapshot(repSnap=>{
          const repliesDiv = card.querySelector('.replies');
          repliesDiv.innerHTML="";
          repSnap.forEach(r=>{
            const rep = r.data();
            const repDiv = document.createElement('div');
            repDiv.style.padding='0.3rem 0.5rem';
            repDiv.style.margin='0.3rem 0';
            repDiv.style.background='rgba(255,255,255,0.05)';
            repDiv.style.borderRadius='10px';
            repDiv.innerHTML=`<strong>${rep.user.name}:</strong> ${rep.content} <span style="font-size:0.7rem;color:#aaa">${rep.createdAt?.toDate ? rep.createdAt.toDate().toLocaleString() : ''}</span>`;
            repliesDiv.appendChild(repDiv);
          });
        });
    });
  });
}

// Post tweet
document.getElementById('tweetForm').addEventListener('submit', e=>{
  e.preventDefault();
  const content = document.getElementById('tweetInput').value.trim();
  if(!content) return;
  db.collection("tweets").add({
    user: currentUser,
    content: content,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });
  document.getElementById('tweetInput').value="";
});

// Initial load
loadTweets();
</script>

</body>
</html>