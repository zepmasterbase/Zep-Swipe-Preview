<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe - Student Rewards</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Orbitron:wght@600&display=swap" rel="stylesheet">

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_API_KEY",
  authDomain: "YOUR_FIREBASE_AUTH_DOMAIN",
  projectId: "YOUR_FIREBASE_PROJECT_ID",
  storageBucket: "YOUR_FIREBASE_STORAGE_BUCKET",
  messagingSenderId: "YOUR_FIREBASE_MESSAGING_SENDER_ID",
  appId: "YOUR_FIREBASE_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Create user profile & wallet if not exists
async function createUserRecords(user, name, role, university, country) {
  const userRef = doc(db, "users", user.uid);
  const walletRef = doc(db, "wallets", user.uid);

  const userSnap = await getDoc(userRef);
  if (!userSnap.exists()) {
    await setDoc(userRef, {
      name,
      email: user.email,
      role,
      university,
      country,
      createdAt: serverTimestamp()
    });
  }

  const walletSnap = await getDoc(walletRef);
  if (!walletSnap.exists()) {
    await setDoc(walletRef, { balance: 0, createdAt: serverTimestamp() });
  }
}

// Sign up function
window.registerUser = async function() {
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const university = document.getElementById('university').value;
  const country = document.getElementById('country').value;
  const role = document.querySelector('input[name="role"]:checked')?.value;

  if (!role) { alert("Please select a role."); return; }

  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    await createUserRecords(userCredential.user, name, role, university, country);
    alert("Registration successful! Redirecting to dashboard...");
    window.location.href = "dashboard.html";
  } catch(e) { alert(e.message); }
}

// Login function
window.loginUser = async function() {
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    alert("Login successful! Redirecting to dashboard...");
    window.location.href = "dashboard.html";
  } catch(e) { alert(e.message); }
}
</script>

<style>
body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg,#0b0520,#120b2e); color:#fff;}
.glass-card { background: rgba(255,255,255,0.05); backdrop-filter: blur(15px); border-radius: 1.5rem; padding: 1.5rem; box-shadow:0 0 25px rgba(0,255,255,0.2); transition: transform 0.3s, box-shadow 0.3s;}
.glass-card:hover { transform: scale(1.03); box-shadow: 0 0 35px rgba(255,0,255,0.3);}
.gradient-btn { background: linear-gradient(to right,#ff00f0,#00ffb3,#00f0ff); color:white; font-weight:600; border-radius:9999px; padding:0.75rem 2rem; transition: transform 0.2s, box-shadow 0.2s;}
.gradient-btn:hover { transform: scale(1.05); box-shadow:0 8px 20px rgba(255,0,255,0.3);}
.neon-header { font-family:'Orbitron',sans-serif; font-weight:700; background: linear-gradient(135deg,#ff00f0,#00ffb3,#00f0ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow:0 0 10px #ff00f0,0 0 20px #00ffb3,0 0 30px #00f0ff;}
</style>
</head>
<body class="flex flex-col min-h-screen">

<!-- NAVBAR -->
<header class="flex justify-between items-center py-6 px-8">
  <div class="neon-header text-4xl md:text-5xl">Zep Swipe</div>
  <nav class="flex gap-6 items-center">
    <button onclick="document.getElementById('authModal').classList.remove('hidden')" class="gradient-btn">Login / Sign Up</button>
  </nav>
</header>

<!-- HERO -->
<section class="text-center py-16 px-6 relative">
  <h1 class="text-5xl md:text-6xl mb-4">Earn. Learn. Get Rewarded.</h1>
  <p class="text-lg md:text-xl text-gray-200 max-w-2xl mx-auto">Join early access, build profile, earn tokens, and prepare for our upcoming marketplace.</p>
  <img src="https://images.unsplash.com/photo-1612831455542-f2f7be25893a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=800" alt="Web3 Neon Student" class="mx-auto mt-6 rounded-xl shadow-lg">
  <a href="#join" class="gradient-btn mt-6 inline-block">Join Beta</a>
</section>

<!-- JOIN BETA FORM -->
<section id="join" class="max-w-2xl mx-auto py-12 px-6 glass-card mb-12">
  <h2 class="text-2xl font-bold mb-6 text-center text-pink-400">Join the Beta</h2>
  <form class="flex flex-col gap-4">
    <input id="name" type="text" placeholder="Full Name" required class="p-3 rounded-xl bg-white bg-opacity-10 border border-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400">
    <input id="email" type="email" placeholder="Email" required class="p-3 rounded-xl bg-white bg-opacity-10 border border-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400">
    <input type="password" id="password" placeholder="Password" required class="p-3 rounded-xl bg-white bg-opacity-10 border border-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400">
    <input id="university" type="text" placeholder="University Name" required class="p-3 rounded-xl bg-white bg-opacity-10 border border-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400">
    <select id="country" required class="p-3 rounded-xl bg-white bg-opacity-10 border border-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400">
      <option value="" disabled selected>Select Your Country</option>
      <option>Ghana</option>
      <option>South Africa</option>
      <option>Kenya</option>
      <option>Nigeria</option>
      <option>Uganda</option>
      <option>Rwanda</option>
      <option>Tanzania</option>
      <option>Egypt</option>
      <option>Morocco</option>
      <option>Senegal</option>
    </select>

    <!-- ROLE SELECTION -->
    <div class="flex gap-6 mt-2">
      <label class="flex items-center gap-2"><input type="radio" name="role" value="Student"> Student</label>
      <label class="flex items-center gap-2"><input type="radio" name="role" value="Vendor"> Vendor</label>
    </div>

    <button type="button" onclick="registerUser()" class="gradient-btn mt-2">Sign Up</button>
  </form>
</section>

</body>
</html>