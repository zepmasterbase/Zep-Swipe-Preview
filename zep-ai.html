<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Zep AI â€” Student Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root {
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --glass:rgba(255,255,255,0.06);
  --bg:radial-gradient(circle at 25% 10%, #050018 0%, #000010 100%);
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;}
body{
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:#fff;
  display:flex; flex-direction:column;
  overflow:hidden;
}

/* HEADER */
header{
  flex-shrink:0;
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 18px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(255,255,255,0.1);
  box-shadow:0 0 30px rgba(0,240,255,0.3);
}
.logo{
  font-family:'Orbitron';
  font-size:1.3rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.logout-btn{
  background:none; border:none; cursor:pointer;
  filter:drop-shadow(0 0 8px var(--zep-blue));
  transition:.3s;
}
.logout-btn:hover{
  transform:scale(1.1);
  filter:drop-shadow(0 0 14px var(--zep-violet));
}

/* CHAT MAIN */
main{
  flex:1;
  display:flex; flex-direction:column;
  justify-content:flex-end; align-items:center;
  padding:10px 16px 90px;
}
.chat-box{
  width:100%; max-width:720px; flex:1;
  display:flex; flex-direction:column;
  background:var(--glass);
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.12);
  backdrop-filter:blur(18px);
  overflow:hidden;
}
.chat-area{
  flex:1; overflow-y:auto; padding:16px;
}
.msg{
  margin:8px 0; padding:12px 16px;
  border-radius:14px; line-height:1.5;
  max-width:85%;
  animation:fadeIn .4s ease;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:none;}
}
.user{
  background:linear-gradient(90deg,var(--zep-violet),var(--zep-blue));
  color:#050018; align-self:flex-end;
}
.ai{
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  color:#fff;
}

/* INPUT BAR */
.input-bar{
  display:flex; align-items:center; gap:10px;
  padding:12px 14px;
  background:rgba(255,255,255,0.05);
  border-top:1px solid rgba(255,255,255,0.08);
}
.input-bar input{
  flex:1;
  background:rgba(255,255,255,0.1);
  border:none; outline:none;
  padding:12px 18px; border-radius:999px;
  color:#fff;
}
.send-btn{
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  border:none; color:#050018; font-weight:700;
  padding:12px 20px; border-radius:999px;
  font-family:'Orbitron';
  cursor:pointer;
}

/* FOOTER NAV */
footer{
  position:fixed; bottom:0; left:0; width:100%;
  background:rgba(0,0,0,0.7);
  backdrop-filter:blur(12px);
  border-top:1px solid rgba(255,255,255,0.1);
  display:flex; justify-content:space-around;
  padding:10px 0;
}
.footer-icon svg{
  width:28px; height:28px;
  stroke:var(--zep-blue);
  transition:.25s;
}
.footer-icon:hover svg{
  stroke:var(--zep-violet);
  transform:scale(1.1);
}
</style>
</head>

<body>

<header>
  <div class="logo">Zep AI â€” Student Assistant</div>

  <!-- Logout linked to index.html -->
  <button class="logout-btn" onclick="window.location.href='index.html'" title="Logout">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#00f0ff" viewBox="0 0 24 24" width="26" height="26" stroke-width="1.8">
      <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
      <polyline points="10 17 15 12 10 7"/>
      <line x1="15" y1="12" x2="3" y2="12"/>
    </svg>
  </button>
</header>

<main>
  <div class="chat-box">
    <div class="chat-area" id="chatArea"></div>

    <div class="input-bar">
      <input type="text" id="userInput" placeholder="Ask Zep AI about your assignment..." onkeypress="if(event.key==='Enter'){sendMessage()}" />
      <button class="send-btn" onclick="sendMessage()">Ask</button>
    </div>
  </div>
</main>

<!-- FOOTER -->
<footer>
  <a href="student-dashboard.html" class="footer-icon" title="Home">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8">
      <rect x="3" y="7" width="18" height="13" rx="2"/>
      <path d="M3 11h18"/>
    </svg>
  </a>

  <a href="wallet.html" class="footer-icon" title="Wallet">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8">
      <rect x="3" y="6" width="18" height="12" rx="2"/>
      <path d="M16 12h5"/>
    </svg>
  </a>

  <a href="learn-earn.html" class="footer-icon" title="Reward">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8">
      <circle cx="12" cy="12" r="8"/>
      <path d="M12 8v8M8 12h8"/>
    </svg>
  </a>

  <a href="profile.html" class="footer-icon" title="Profile">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8">
      <circle cx="12" cy="7" r="4"/>
      <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
    </svg>
  </a>
</footer>

<script>
// Load saved chat
window.onload = () => {
  const saved = localStorage.getItem("zepAIStudentChat");
  const chat = document.getElementById("chatArea");

  if (saved) {
    chat.innerHTML = saved;
  } else {
    const welcome = document.createElement("div");
    welcome.className = "msg ai";
    welcome.innerHTML =
      "ðŸ‘‹ Hey student! I'm <strong>Zep AI</strong>. I can help you with assignments, summaries, explanations, maths, research writing and more. What are you working on today?";
    chat.appendChild(welcome);
  }
  chat.scrollTop = chat.scrollHeight;
};

function saveChat() {
  localStorage.setItem("zepAIStudentChat", document.getElementById("chatArea").innerHTML);
}

function sendMessage() {
  const input = document.getElementById("userInput");
  const text = input.value.trim();
  if (!text) return;

  const chat = document.getElementById("chatArea");

  const userMsg = document.createElement("div");
  userMsg.className = "msg user";
  userMsg.textContent = text;
  chat.appendChild(userMsg);
  input.value = "";

  saveChat();
  chat.scrollTop = chat.scrollHeight;

  const aiMsg = document.createElement("div");
  aiMsg.className = "msg ai";
  aiMsg.textContent = "Zep AI is thinking...";
  chat.appendChild(aiMsg);

  setTimeout(() => {
    typeOut(aiMsg, generateAIResponse(text));
    saveChat();
  }, 500);
}

function typeOut(element, text) {
  element.textContent = "";
  let i = 0;
  let speed = 18;

  function type() {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }
  type();
}

function generateAIResponse(q) {
  const txt = q.toLowerCase();

  if (txt.includes("explain") || txt.includes("definition"))
    return "ðŸ“˜ Here's a simple explanation:\n\n" + explainConcept(q);

  if (txt.includes("summar"))
    return "ðŸ“ Here's a clean summary:\n\n" + summarizeText(q);

  if (txt.includes("math") || txt.includes("solve"))
    return "âœï¸ Let's solve it step-by-step:\n\n" + solveMath(q);

  if (txt.includes("essay"))
    return "ðŸ“ Hereâ€™s an essay draft you can use:\n\n" + essayTemplate(q);

  if (txt.includes("research") || txt.includes("write"))
    return "ðŸ“š Here's a structured research response:\n\n" + researchTemplate(q);

  return "ðŸ¤– I can help with assignments, essays, maths, explanations or summaries.\nTry: â€œExplain photosynthesis in simple termsâ€.";
}

/* AI Helper Functions */
function explainConcept(q){
  return "This concept refers to the main idea you're studying. Give me the exact topic and Iâ€™ll break it down simply.";
}
function summarizeText(){
  return "Send me the paragraph or PDF text and Iâ€™ll summarise it into key points.";
}
function solveMath(){
  return "Type the equation clearly, e.g. 'Solve 3x + 5 = 20'.";
}
function essayTemplate(topic){
  return `**Essay Outline on ${topic}:**\n\n1. Introduction\n2. Key Arguments\n3. Evidence & Examples\n4. Conclusion\n\nSend me the exact topic and I will write the full essay.`;
}
function researchTemplate(topic){
  return `**Research Breakdown for: ${topic}**\n\nâ€¢ Introduction\nâ€¢ Problem Statement\nâ€¢ Findings\nâ€¢ Data Insights\nâ€¢ Conclusion\n\nSend more details for a full research write-up.`;
}
</script>

</body>
</html>